<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lcdt.warehouse.mapper.InventoryMapper">

    <resultMap id="BaseResultMap" type="com.lcdt.warehouse.entity.Inventory">
        <id column="invertory_id" jdbcType="BIGINT" property="invertoryId" />
        <result column="goods_id" jdbcType="BIGINT" property="goodsId" />
        <result column="invertory_num" jdbcType="INTEGER" property="invertoryNum" />
        <result column="lock_num" jdbcType="REAL" property="lockNum" />
        <result column="warehouse_id" jdbcType="BIGINT" property="wareHouseId" />
        <result column="company_id" jdbcType="BIGINT" property="companyId" />
        <result column="remark" jdbcType="VARCHAR" property="remark" />
        <result column="business_desc" jdbcType="VARCHAR" property="businessDesc" />
        <result column="storage_location_code" jdbcType="VARCHAR" property="storageLocationCode" />
        <result column="warehouse_name" jdbcType="VARCHAR" property="warehouseName" />
        <result column="customer_id" jdbcType="BIGINT" property="customerId" />
        <result column="customer_name" jdbcType="VARCHAR" property="customerName" />
        
        <association  property="goodsInfo" javaType="com.lcdt.warehouse.entity.GoodsInfo" autoMapping="true">

        </association>
        
    </resultMap>

    
    <select id="selectInventoryList" resultMap="BaseResultMap" >
        SELECT * from inventory t left join goods_info  g on
        t.goods_id = g.goods_id
        <where>
            <if test="batch != null">
                batch = #{batch}
            </if>

            <if test="wareHouseId != null">
               AND warehouse_id = #{wareHouseId}
            </if>

            <if test="storageLocationCode != null">
                and storage_location_code = #{storageLocationCode}
            </if>

            <if test="goodsId != null">
                and goods_id = #{goodsId}
            </if>

            <if test="customerId != null">
                and customer_id = #{customerId}
            </if>

            <if test="originalGoodsId != null">
                and original_goods_id = #{originalGoodsId}
            </if>

            <if test="goodsName != null ">
                and goods_name like CONCAT(CONCAT('%',#{goodsName}),'%')
            </if>
            <if test="goodsBarCode != null ">
                and goods_barcode like CONCAT(CONCAT('%',#{goodsBarCode}),'%')
            </if>
            <if test="goodsCode != null ">
                and goods_code like CONCAT(CONCAT('%',#{goodsCode}),'%')
            </if>

        </where>
    </select>







</mapper>
